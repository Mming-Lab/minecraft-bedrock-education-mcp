# Minecraft Bedrock MCP Server - 実環境テストガイド

## 🎯 テスト目的
実際のMinecraft Bedrock Editionとの接続・動作を検証し、MCPクライアント（Claude Desktop）経由での各ツールの正常動作を確認する。

## 📋 事前準備チェックリスト

### 環境要件
- [ ] Node.js 16+がインストール済み
- [ ] Minecraft Bedrock Editionがインストール済み
- [ ] Claude Desktopがインストール・設定済み
- [ ] プロジェクトがビルド済み（`npm run build`）

### Minecraftワールド設定
- [ ] 新しいワールドを作成（またはテスト用ワールドを使用）
- [ ] **チートが有効**に設定
- [ ] **クリエイティブモード**に設定
- [ ] 全ての実験的機能を**無効**に設定
- [ ] ワールドを起動してスポーン地点を確認

## 🚀 Phase 3-1: 基本接続テスト

### ステップ1: サーバー起動
```bash
# ターミナル1: MCPサーバー起動
npm start
```

**期待結果:**
- [ ] `TypeScript Minecraft WebSocketサーバーを起動中 ポート:8001`が表示
- [ ] `Minecraftから接続: /connect localhost:8001/ws`が表示
- [ ] エラーなく起動完了

### ステップ2: Minecraft接続
Minecraftのチャットで実行:
```
/connect localhost:8001/ws
```

**期待結果:**
- [ ] サーバーコンソールに`新しいWebSocket接続が確立されました`が表示
- [ ] `プレイヤーを識別: [プレイヤー名]`が表示
- [ ] Minecraftで接続成功メッセージが表示

### ステップ3: Claude Desktop接続
Claude Desktopを起動してMCPサーバーとの接続を確認

**期待結果:**
- [ ] Claude Desktopがツール一覧を取得
- [ ] 17個のツールが利用可能と表示（基本2個 + モジュラー15個）

## 🛠️ Phase 3-2: 基本ツールテスト

### テスト1: send_message
Claude Desktopで実行:
```
「Hello, Minecraft!」というメッセージをMinecraftに送信してください
```

**期待結果:**
- [ ] Minecraftチャットに`Hello, Minecraft!`が表示
- [ ] サーバーコンソールにメッセージ送信ログが表示
- [ ] Claude Desktopで成功レスポンスを受信

### テスト2: execute_command
Claude Desktopで実行:
```
Minecraftで「time set day」コマンドを実行してください
```

**期待結果:**
- [ ] Minecraftの時刻が昼に変更
- [ ] サーバーでコマンド実行ログが確認
- [ ] エラーなく完了

## 🎮 Phase 3-3: プレイヤー制御テスト

### テスト3: player_position
Claude Desktopで実行:
```
現在のプレイヤー位置を取得してください
```

**期待結果:**
- [ ] 現在のX, Y, Z座標が返される
- [ ] 座標値が妥当な範囲内（Y: -64〜320など）

### テスト4: player_move
Claude Desktopで実行:
```
プレイヤーを座標(100, 64, 200)に移動させてください
```

**期待結果:**
- [ ] プレイヤーが指定座標にテレポート
- [ ] 移動先が正確（±1ブロック程度の誤差は許容）
- [ ] 落下ダメージやブロック内埋まりなし

### テスト5: player_say
Claude Desktopで実行:
```
プレイヤーに「テストメッセージ」と発言させてください
```

**期待結果:**
- [ ] チャットに`<プレイヤー名> テストメッセージ`が表示
- [ ] 通常のプレイヤー発言と同じ形式

## 🤖 Phase 3-4: エージェント制御テスト

### テスト6: agent_move
Claude Desktopで実行:
```
エージェントを前方に3ブロック移動させてください
```

**期待結果:**
- [ ] エージェント（@c）が前方に移動
- [ ] 移動距離が正確
- [ ] 障害物がある場合は適切に停止

### テスト7: agent_turn
Claude Desktopで実行:
```
エージェントを右に90度回転させてください
```

**期待結果:**
- [ ] エージェントが右を向く
- [ ] 向きが正確に変更される

## 🌍 Phase 3-5: ワールド操作テスト

### テスト8: world_block
Claude Desktopで実行:
```
座標(0, 64, 0)に石ブロックを設置してください
```

**期待結果:**
- [ ] 指定座標に石ブロックが設置される
- [ ] 既存ブロックが適切に置換される

### テスト9: world_fill
Claude Desktopで実行:
```
座標(10, 64, 10)から(15, 64, 15)の範囲を草ブロックで埋めてください
```

**期待結果:**
- [ ] 指定範囲（6x1x6）が草ブロックで埋まる
- [ ] 範囲外に影響なし

## 🏗️ Phase 3-6: 建築ツールテスト

### テスト10: build_cube
Claude Desktopで実行:
```
座標(20, 64, 20)から(25, 69, 25)に石の立方体を建築してください
```

**期待結果:**
- [ ] 6x6x6の石の立方体が建築される
- [ ] 形状が正確な立方体
- [ ] 内部が実体（hollow=falseの場合）

### テスト11: build_cube (中空)
Claude Desktopで実行:
```
座標(30, 64, 30)から(35, 69, 35)に中空のガラスの立方体を建築してください
```

**期待結果:**
- [ ] 外壁のみのガラス立方体が建築される
- [ ] 内部が空洞
- [ ] 壁の厚さが1ブロック

## 🔍 Phase 3-7: エラー処理テスト

### テスト12: 無効な座標
Claude Desktopで実行:
```
プレイヤーを座標(999999, 500, 999999)に移動させてください
```

**期待結果:**
- [ ] 適切なエラーメッセージが返される
- [ ] サーバーがクラッシュしない
- [ ] プレイヤー位置が変更されない

### テスト13: 接続断
1. Minecraftを終了
2. Claude Desktopでツールを実行

**期待結果:**
- [ ] 「プレイヤーが接続されていません」エラー
- [ ] サーバーが継続動作
- [ ] 再接続可能


## 🚨 トラブルシューティング

### よくある問題

**Minecraft接続失敗:**
1. ポート8001が使用中 → 別ポートで起動
2. チートが無効 → ワールド設定を確認
3. 実験的機能が有効 → 全て無効に設定

**Claude Desktop認識失敗:**
1. config設定確認
2. Claude Desktop再起動
3. ファイルパス確認（絶対パス使用）

**ツール実行エラー:**
1. プレイヤー接続状態確認
2. 座標値の妥当性確認
3. サーバーログでエラー詳細確認

## ✅ テスト完了基準

全てのテストケースで以下を満たすこと：
- [ ] 期待される動作が確認できる
- [ ] エラーが適切に処理される
- [ ] サーバーが安定動作する
- [ ] パフォーマンスが許容範囲内

---

**テスト実施日:** ___________  
**テスト実施者:** ___________  
**結果:** ___________